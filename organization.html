<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>组织架构 - 政务办公系统</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .org-tree-node:hover {
            background-color: #f8fafc;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="flex min-h-screen">
        <!-- 侧边栏导航 -->
        <aside class="w-64 bg-blue-800 text-white shadow-lg hidden md:block">
            <div class="p-4 border-b border-blue-700">
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/40x40?text=Logo" alt="Logo" class="w-10 h-10 mr-3">
                    <h1 class="text-xl font-bold">政务办公系统</h1>
                </div>
            </div>
            <nav class="py-4">
                <div class="px-4 py-2 text-blue-200 text-xs uppercase tracking-wider">主菜单</div>
                <a href="dashboard.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-tachometer-alt w-5 text-center mr-2"></i>
                    <span>个人工作台</span>
                </a>
                <a href="document-flow.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-file-signature w-5 text-center mr-2"></i>
                    <span>公文处理</span>
                </a>
                <a href="document-mgmt.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-folder w-5 text-center mr-2"></i>
                    <span>文档管理</span>
                </a>
                <a href="meeting.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-calendar-alt w-5 text-center mr-2"></i>
                    <span>会议管理</span>
                </a>
                <a href="announcement.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-bullhorn w-5 text-center mr-2"></i>
                    <span>通知公告</span>
                </a>
                <a href="task.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-tasks w-5 text-center mr-2"></i>
                    <span>任务管理</span>
                </a>
                <a href="attendance.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-user-clock w-5 text-center mr-2"></i>
                    <span>考勤管理</span>
                </a>
                <a href="organization.html" class="flex items-center px-4 py-3 text-white bg-blue-900 bg-opacity-50">
                    <i class="fas fa-sitemap w-5 text-center mr-2"></i>
                    <span>组织架构</span>
                </a>
                <a href="settings.html" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                    <i class="fas fa-cog w-5 text-center mr-2"></i>
                    <span>系统设置</span>
                </a>
            </nav>
        </aside>

        <!-- 主要内容区域 -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- 顶部导航栏 -->
            <header class="bg-white shadow-sm">
                <div class="flex items-center justify-between px-6 py-3">
                    <div class="flex items-center">
                        <button class="text-gray-500 focus:outline-none md:hidden">
                            <i class="fas fa-bars"></i>
                        </button>
                        <h2 class="text-lg font-medium text-gray-800 ml-4">组织架构</h2>
                    </div>
                    <div class="flex items-center">
                        <button class="flex mx-4 text-gray-600 focus:outline-none">
                            <i class="fas fa-bell text-lg"></i>
                            <span class="absolute top-0 right-0 h-4 w-4 mt-1 mr-2 bg-red-500 rounded-full text-xs text-white flex items-center justify-center">3</span>
                        </button>
                        <div class="relative">
                            <button id="userMenuBtn" class="relative z-10 block h-8 w-8 rounded-full overflow-hidden focus:outline-none">
                                <img class="h-full w-full object-cover" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Your avatar">
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 内容区域 -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
                <div class="container mx-auto">
                    <!-- 操作栏 -->
                    <div class="bg-white p-4 rounded-lg shadow-md mb-6">
                        <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                            <div class="flex flex-wrap items-center gap-2">
                                <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center shadow-sm">
                                    <i class="fas fa-print mr-2"></i> 打印组织架构
                                </button>
                                <button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md flex items-center shadow-sm">
                                    <i class="fas fa-file-export mr-2"></i> 导出
                                </button>
                            </div>
                            <div class="flex items-center w-full md:w-auto">
                                <div class="relative flex-grow md:flex-grow-0">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center">
                                        <i class="fas fa-search text-gray-500"></i>
                                    </span>
                                    <input class="form-input w-full md:w-64 rounded-md pl-10 py-2 border border-gray-300" type="text" placeholder="搜索部门或人员...">
                                </div>
                                <button class="ml-2 bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-md">
                                    <i class="fas fa-filter"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 组织架构视图 -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- 左侧部门树 -->
                        <div class="lg:col-span-1">
                            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                                <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                                    <h3 class="text-lg font-semibold text-gray-800">部门结构</h3>
                                    <div class="flex space-x-2">
                                        <button class="text-gray-500 hover:text-gray-700 focus:outline-none">
                                            <i class="fas fa-expand-alt"></i>
                                        </button>
                                        <button class="text-gray-500 hover:text-gray-700 focus:outline-none">
                                            <i class="fas fa-compress-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="p-3 max-h-screen overflow-y-auto">
                                    <!-- 部门树 -->
                                    <ul class="space-y-1">
                                        <li>
                                            <div class="org-tree-node p-2 rounded flex items-center text-blue-600 font-medium bg-blue-50">
                                                <i class="fas fa-building mr-2"></i>
                                                <span>市政府办公厅</span>
                                                <span class="ml-auto text-xs text-gray-500">192人</span>
                                            </div>
                                            <ul class="ml-6 mt-1 space-y-1">
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>行政办公室</span>
                                                        <span class="ml-auto text-xs text-gray-500">24人</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>人事部</span>
                                                        <span class="ml-auto text-xs text-gray-500">18人</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>财政部</span>
                                                        <span class="ml-auto text-xs text-gray-500">32人</span>
                                                    </div>
                                                    <ul class="ml-6 mt-1 space-y-1">
                                                        <li>
                                                            <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                                <i class="fas fa-users mr-2 text-gray-500"></i>
                                                                <span>预算科</span>
                                                                <span class="ml-auto text-xs text-gray-500">12人</span>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                                <i class="fas fa-users mr-2 text-gray-500"></i>
                                                                <span>会计科</span>
                                                                <span class="ml-auto text-xs text-gray-500">10人</span>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                                <i class="fas fa-users mr-2 text-gray-500"></i>
                                                                <span>审计科</span>
                                                                <span class="ml-auto text-xs text-gray-500">10人</span>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>城市规划部</span>
                                                        <span class="ml-auto text-xs text-gray-500">28人</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>信息技术部</span>
                                                        <span class="ml-auto text-xs text-gray-500">15人</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>信息安全处</span>
                                                        <span class="ml-auto text-xs text-gray-500">8人</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>防疫工作组</span>
                                                        <span class="ml-auto text-xs text-gray-500">12人</span>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="org-tree-node p-2 rounded flex items-center hover:bg-gray-50">
                                                        <i class="fas fa-users mr-2 text-gray-500"></i>
                                                        <span>城市管理局</span>
                                                        <span class="ml-auto text-xs text-gray-500">55人</span>
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 右侧部门详情 -->
                        <div class="lg:col-span-2">
                            <div class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                                <div class="p-6 border-b border-gray-200">
                                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                                        <div>
                                            <h2 class="text-2xl font-bold text-gray-800">市政府办公厅</h2>
                                            <p class="text-gray-600 mt-1">政府办公厅是市政府的综合办事机构，承担政务协调、政策研究、文秘事务等职能。</p>
                                        </div>
                                        <div class="mt-4 md:mt-0 flex space-x-2">
                                            <button class="bg-blue-100 text-blue-600 px-3 py-1 rounded-md text-sm flex items-center">
                                                <i class="fas fa-sitemap mr-1"></i> 组织图
                                            </button>
                                            <button class="bg-green-100 text-green-600 px-3 py-1 rounded-md text-sm flex items-center">
                                                <i class="fas fa-user-plus mr-1"></i> 添加人员
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                                        <div class="flex items-center">
                                            <div class="p-2 rounded-full bg-blue-100 text-blue-500 mr-3">
                                                <i class="fas fa-user-tie"></i>
                                            </div>
                                            <div>
                                                <p class="text-sm text-gray-500">部门领导</p>
                                                <p class="font-medium">张主任</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center">
                                            <div class="p-2 rounded-full bg-blue-100 text-blue-500 mr-3">
                                                <i class="fas fa-phone-alt"></i>
                                            </div>
                                            <div>
                                                <p class="text-sm text-gray-500">联系电话</p>
                                                <p class="font-medium">0123-8765432</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center">
                                            <div class="p-2 rounded-full bg-blue-100 text-blue-500 mr-3">
                                                <i class="fas fa-envelope"></i>
                                            </div>
                                            <div>
                                                <p class="text-sm text-gray-500">邮箱地址</p>
                                                <p class="font-medium">office@gov.cn</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 部门人员列表 -->
                                <div class="p-6">
                                    <div class="flex justify-between items-center mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800">部门人员 (192人)</h3>
                                        <div class="flex space-x-2">
                                            <select class="form-select text-sm border-gray-300 rounded-md">
                                                <option>所有人员</option>
                                                <option>在职人员</option>
                                                <option>离职人员</option>
                                                <option>实习人员</option>
                                            </select>
                                            <select class="form-select text-sm border-gray-300 rounded-md">
                                                <option>按姓名</option>
                                                <option>按职位</option>
                                                <option>按入职时间</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <!-- 人员卡片 1 -->
                                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div class="flex items-center">
                                                <img class="w-12 h-12 rounded-full mr-4" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="头像">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">张主任</h4>
                                                    <p class="text-sm text-gray-500">办公厅主任</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                                                <div>
                                                    <p class="text-gray-500">电话:</p>
                                                    <p>0123-8765432</p>
                                                </div>
                                                <div>
                                                    <p class="text-gray-500">邮箱:</p>
                                                    <p>zhang@gov.cn</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">详情</button>
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">联系</button>
                                            </div>
                                        </div>
                                        
                                        <!-- 人员卡片 2 -->
                                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div class="flex items-center">
                                                <img class="w-12 h-12 rounded-full mr-4" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="头像">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">李秘书</h4>
                                                    <p class="text-sm text-gray-500">城市规划部</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                                                <div>
                                                    <p class="text-gray-500">电话:</p>
                                                    <p>0123-8765433</p>
                                                </div>
                                                <div>
                                                    <p class="text-gray-500">邮箱:</p>
                                                    <p>li@gov.cn</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">详情</button>
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">联系</button>
                                            </div>
                                        </div>
                                        
                                        <!-- 人员卡片 3 -->
                                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div class="flex items-center">
                                                <img class="w-12 h-12 rounded-full mr-4" src="https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="头像">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">王财务</h4>
                                                    <p class="text-sm text-gray-500">财政部</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                                                <div>
                                                    <p class="text-gray-500">电话:</p>
                                                    <p>0123-8765434</p>
                                                </div>
                                                <div>
                                                    <p class="text-gray-500">邮箱:</p>
                                                    <p>wang@gov.cn</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">详情</button>
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">联系</button>
                                            </div>
                                        </div>
                                        
                                        <!-- 人员卡片 4 -->
                                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div class="flex items-center">
                                                <img class="w-12 h-12 rounded-full mr-4" src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="头像">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">赵技术</h4>
                                                    <p class="text-sm text-gray-500">信息技术部</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                                                <div>
                                                    <p class="text-gray-500">电话:</p>
                                                    <p>0123-8765435</p>
                                                </div>
                                                <div>
                                                    <p class="text-gray-500">邮箱:</p>
                                                    <p>zhao@gov.cn</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">详情</button>
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">联系</button>
                                            </div>
                                        </div>
                                        
                                        <!-- 人员卡片 5 -->
                                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div class="flex items-center">
                                                <img class="w-12 h-12 rounded-full mr-4" src="https://images.unsplash.com/photo-1565884280295-98eb83e41c65?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="头像">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">钱组长</h4>
                                                    <p class="text-sm text-gray-500">防疫工作组</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                                                <div>
                                                    <p class="text-gray-500">电话:</p>
                                                    <p>0123-8765436</p>
                                                </div>
                                                <div>
                                                    <p class="text-gray-500">邮箱:</p>
                                                    <p>qian@gov.cn</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">详情</button>
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">联系</button>
                                            </div>
                                        </div>
                                        
                                        <!-- 人员卡片 6 -->
                                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div class="flex items-center">
                                                <img class="w-12 h-12 rounded-full mr-4" src="https://images.unsplash.com/photo-1599566150163-29194dcaad36?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="头像">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">孙助理</h4>
                                                    <p class="text-sm text-gray-500">行政办公室</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                                                <div>
                                                    <p class="text-gray-500">电话:</p>
                                                    <p>0123-8765437</p>
                                                </div>
                                                <div>
                                                    <p class="text-gray-500">邮箱:</p>
                                                    <p>sun@gov.cn</p>
                                                </div>
                                            </div>
                                            <div class="mt-3 flex space-x-2">
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">详情</button>
                                                <button class="text-blue-600 hover:text-blue-800 text-sm">联系</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 分页 -->
                                    <div class="mt-6 flex items-center justify-between">
                                        <div class="text-sm text-gray-500">
                                            显示 <span class="font-medium">1</span> 到 <span class="font-medium">6</span> 条，共 <span class="font-medium">192</span> 条记录
                                        </div>
                                        <div class="flex space-x-2">
                                            <button class="px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed">上一页</button>
                                            <button class="px-3 py-1 border border-gray-300 rounded-md bg-blue-50 text-blue-600 font-medium">1</button>
                                            <button class="px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-700">2</button>
                                            <button class="px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-700">3</button>
                                            <button class="px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-700">...</button>
                                            <button class="px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-700">32</button>
                                            <button class="px-3 py-1 border border-gray-300 rounded-md bg-white text-gray-700">下一页</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <div id="userMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
        <a href="settings.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">账号设置</a>
        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">帮助中心</a>
        <a href="#" id="logoutBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">退出登录</a>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 检查登录状态
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (!isLoggedIn || isLoggedIn !== 'true') {
                window.location.href = 'login.html';
                return;
            }
            
            // 用户菜单交互
            const userMenuBtn = document.getElementById('userMenuBtn');
            const userMenu = document.getElementById('userMenu');
            
            if (userMenuBtn && userMenu) {
                userMenuBtn.addEventListener('click', function() {
                    userMenu.classList.toggle('hidden');
                });
                
                // 点击其他地方关闭菜单
                document.addEventListener('click', function(event) {
                    if (!userMenuBtn.contains(event.target) && !userMenu.contains(event.target)) {
                        userMenu.classList.add('hidden');
                    }
                });
            }
            
            // 退出登录
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    localStorage.removeItem('isLoggedIn');
                    localStorage.removeItem('username');
                    window.location.href = 'login.html';
                });
            }

            // 部门数据
            const departmentData = {
                "市政府办公厅": {
                    name: "市政府办公厅",
                    description: "政府办公厅是市政府的综合办事机构，承担政务协调、政策研究、文秘事务等职能。",
                    leader: "张主任",
                    phone: "0123-8765432",
                    email: "office@gov.cn",
                    staffCount: 192
                },
                "行政办公室": {
                    name: "行政办公室",
                    description: "负责组织协调市政府日常行政事务，处理公文流转，安排会议等工作。",
                    leader: "刘主任",
                    phone: "0123-8765439",
                    email: "admin@gov.cn",
                    staffCount: 24
                },
                "人事部": {
                    name: "人事部",
                    description: "负责政府机构人员管理、招聘、培训和考核等人力资源相关工作。",
                    leader: "陈经理",
                    phone: "0123-8765440",
                    email: "hr@gov.cn",
                    staffCount: 18
                },
                "财政部": {
                    name: "财政部",
                    description: "负责市政府预算、财务管理、资金调配、财政监督等工作。",
                    leader: "王部长",
                    phone: "0123-8765434",
                    email: "finance@gov.cn",
                    staffCount: 32
                },
                "预算科": {
                    name: "预算科",
                    description: "负责财政预算编制、审核和执行监督工作。",
                    leader: "马科长",
                    phone: "0123-8765441",
                    email: "budget@gov.cn",
                    staffCount: 12
                },
                "会计科": {
                    name: "会计科",
                    description: "负责政府各部门会计核算、财务报表、资金结算等工作。",
                    leader: "郑科长",
                    phone: "0123-8765442",
                    email: "account@gov.cn",
                    staffCount: 10
                },
                "审计科": {
                    name: "审计科",
                    description: "负责政府内部审计、财务监督、风险控制等工作。",
                    leader: "林科长",
                    phone: "0123-8765443",
                    email: "audit@gov.cn",
                    staffCount: 10
                },
                "城市规划部": {
                    name: "城市规划部",
                    description: "负责城市规划编制、审批和管理，推动城市可持续发展。",
                    leader: "李部长",
                    phone: "0123-8765433",
                    email: "planning@gov.cn",
                    staffCount: 28
                },
                "信息技术部": {
                    name: "信息技术部",
                    description: "负责政府信息系统建设、维护和技术支持，推动政务信息化。",
                    leader: "赵部长",
                    phone: "0123-8765435",
                    email: "it@gov.cn",
                    staffCount: 15
                },
                "信息安全处": {
                    name: "信息安全处",
                    description: "负责政府信息系统安全防护、安全审计和应急响应等工作。",
                    leader: "黄处长",
                    phone: "0123-8765444",
                    email: "security@gov.cn",
                    staffCount: 8
                },
                "防疫工作组": {
                    name: "防疫工作组",
                    description: "负责疫情防控工作的协调、组织和执行，保障公共卫生安全。",
                    leader: "钱组长",
                    phone: "0123-8765436",
                    email: "pandemic@gov.cn",
                    staffCount: 12
                },
                "城市管理局": {
                    name: "城市管理局",
                    description: "负责城市环境卫生、市容秩序、园林绿化等城市管理工作。",
                    leader: "吴局长",
                    phone: "0123-8765445",
                    email: "citymanage@gov.cn",
                    staffCount: 55
                }
            };

            // 人员数据
            const staffData = [
                {
                    id: 1,
                    name: "张主任",
                    position: "办公厅主任",
                    department: "市政府办公厅",
                    phone: "0123-8765432",
                    email: "zhang@gov.cn",
                    avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",
                    details: {
                        gender: "男",
                        age: 48,
                        education: "硕士研究生",
                        major: "公共管理",
                        entryDate: "2015-06-15",
                        address: "城市中心区政府大道123号",
                        bio: "张主任拥有20年公共管理经验，曾任多个政府部门要职，熟悉政务工作流程，擅长团队管理与协调。"
                    }
                },
                {
                    id: 2,
                    name: "李秘书",
                    position: "规划主管",
                    department: "城市规划部",
                    phone: "0123-8765433",
                    email: "li@gov.cn",
                    avatar: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",
                    details: {
                        gender: "女",
                        age: 36,
                        education: "硕士研究生",
                        major: "城市规划",
                        entryDate: "2017-03-22",
                        address: "滨海新区星海路45号",
                        bio: "李秘书具有丰富的城市规划经验，参与了多个城市更新和发展项目，擅长可持续发展规划。"
                    }
                },
                {
                    id: 3,
                    name: "王财务",
                    position: "财务总监",
                    department: "财政部",
                    phone: "0123-8765434",
                    email: "wang@gov.cn",
                    avatar: "https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",
                    details: {
                        gender: "男",
                        age: 42,
                        education: "本科",
                        major: "财务管理",
                        entryDate: "2016-08-10",
                        address: "东区财富广场56号",
                        bio: "王财务拥有注册会计师资格，曾在多家大型企业担任财务管理职位，擅长预算管理和财务分析。"
                    }
                },
                {
                    id: 4,
                    name: "赵技术",
                    position: "IT总监",
                    department: "信息技术部",
                    phone: "0123-8765435",
                    email: "zhao@gov.cn",
                    avatar: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",
                    details: {
                        gender: "男",
                        age: 38,
                        education: "硕士研究生",
                        major: "计算机科学",
                        entryDate: "2018-04-16",
                        address: "高新技术园区创新路78号",
                        bio: "赵技术在IT领域有15年工作经验，熟悉政务信息化建设，领导过多个大型政府信息系统的开发与实施。"
                    }
                },
                {
                    id: 5,
                    name: "钱组长",
                    position: "防疫专家",
                    department: "防疫工作组",
                    phone: "0123-8765436",
                    email: "qian@gov.cn",
                    avatar: "https://images.unsplash.com/photo-1565884280295-98eb83e41c65?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",
                    details: {
                        gender: "女",
                        age: 45,
                        education: "博士",
                        major: "公共卫生",
                        entryDate: "2020-01-05",
                        address: "医疗园区健康路12号",
                        bio: "钱组长是公共卫生领域的专家，在疾病预防控制方面有丰富经验，曾参与多次重大疫情防控工作。"
                    }
                },
                {
                    id: 6,
                    name: "孙助理",
                    position: "行政主管",
                    department: "行政办公室",
                    phone: "0123-8765437",
                    email: "sun@gov.cn",
                    avatar: "https://images.unsplash.com/photo-1599566150163-29194dcaad36?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",
                    details: {
                        gender: "男",
                        age: 32,
                        education: "本科",
                        major: "行政管理",
                        entryDate: "2019-09-20",
                        address: "文化区和平路89号",
                        bio: "孙助理工作认真负责，善于协调和沟通，在行政事务管理、会议组织和文件处理方面有丰富经验。"
                    }
                }
            ];

            // 部门树点击事件
            const orgTreeNodes = document.querySelectorAll('.org-tree-node');
            orgTreeNodes.forEach(node => {
                node.addEventListener('click', function() {
                    // 获取部门名称
                    const deptName = this.querySelector('span').textContent.trim();
                    
                    // 更新部门高亮状态
                    orgTreeNodes.forEach(n => {
                        n.classList.remove('bg-blue-50', 'text-blue-600', 'font-medium');
                        n.classList.add('hover:bg-gray-50');
                    });
                    this.classList.add('bg-blue-50', 'text-blue-600', 'font-medium');
                    this.classList.remove('hover:bg-gray-50');
                    
                    // 更新部门详情
                    updateDepartmentDetail(deptName);
                });
            });

            // 更新部门详情
            function updateDepartmentDetail(deptName) {
                const dept = departmentData[deptName];
                if (!dept) return;
                
                // 更新部门信息
                const detailPanel = document.querySelector('.lg\\:col-span-2 .bg-white');
                
                // 更新部门标题和描述
                const deptTitle = detailPanel.querySelector('h2');
                const deptDesc = deptTitle.nextElementSibling;
                deptTitle.textContent = dept.name;
                deptDesc.textContent = dept.description;
                
                // 更新部门基本信息
                const infoItems = detailPanel.querySelectorAll('.grid.grid-cols-1.md\\:grid-cols-3 .font-medium');
                infoItems[0].textContent = dept.leader;
                infoItems[1].textContent = dept.phone;
                infoItems[2].textContent = dept.email;
                
                // 更新人员列表标题
                const staffTitle = detailPanel.querySelector('.p-6 h3');
                staffTitle.textContent = `部门人员 (${dept.staffCount}人)`;
                
                // 筛选并显示该部门的人员
                const staffContainer = detailPanel.querySelector('.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3');
                staffContainer.innerHTML = '';
                
                // 获取当前部门的人员
                const deptStaff = staffData.filter(staff => staff.department === dept.name);
                
                // 如果没有该部门的人员，显示随机的人员
                const staffToShow = deptStaff.length > 0 ? deptStaff : staffData.slice(0, 3);
                
                // 生成人员卡片
                staffToShow.forEach(staff => {
                    const staffCard = document.createElement('div');
                    staffCard.className = 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow';
                    staffCard.innerHTML = `
                        <div class="flex items-center">
                            <img class="w-12 h-12 rounded-full mr-4" src="${staff.avatar}" alt="头像">
                            <div>
                                <h4 class="font-medium text-gray-800">${staff.name}</h4>
                                <p class="text-sm text-gray-500">${staff.position}</p>
                            </div>
                        </div>
                        <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                            <div>
                                <p class="text-gray-500">电话:</p>
                                <p>${staff.phone}</p>
                            </div>
                            <div>
                                <p class="text-gray-500">邮箱:</p>
                                <p>${staff.email}</p>
                            </div>
                        </div>
                        <div class="mt-3 flex space-x-2">
                            <button class="text-blue-600 hover:text-blue-800 text-sm staff-detail" data-id="${staff.id}">详情</button>
                            <button class="text-blue-600 hover:text-blue-800 text-sm">联系</button>
                        </div>
                    `;
                    staffContainer.appendChild(staffCard);
                });
                
                // 添加人员详情按钮事件
                setupStaffDetailButtons();
            }

            // 添加人员按钮点击事件
            const addStaffBtn = document.querySelector('.bg-green-100.text-green-600');
            if (addStaffBtn) {
                addStaffBtn.addEventListener('click', function() {
                    // 创建添加人员模态框
                    const modal = document.createElement('div');
                    modal.className = 'fixed inset-0 flex items-center justify-center z-50';
                    modal.innerHTML = `
                        <div class="fixed inset-0 bg-black bg-opacity-50"></div>
                        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl z-10">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-semibold text-gray-800">添加人员</h3>
                                <button class="text-gray-500 hover:text-gray-700 focus:outline-none" id="closeAddStaffModal">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <form id="addStaffForm" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">姓名</label>
                                        <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">职位</label>
                                        <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">部门</label>
                                        <select class="mt-1 block w-full border border-gray-300 rounded-md">
                                            ${Object.keys(departmentData).map(dept => `<option>${dept}</option>`).join('')}
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">电话</label>
                                        <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">邮箱</label>
                                        <input type="email" class="mt-1 block w-full border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">性别</label>
                                        <select class="mt-1 block w-full border border-gray-300 rounded-md">
                                            <option>男</option>
                                            <option>女</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">入职日期</label>
                                        <input type="date" class="mt-1 block w-full border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">学历</label>
                                        <select class="mt-1 block w-full border border-gray-300 rounded-md">
                                            <option>博士</option>
                                            <option>硕士研究生</option>
                                            <option>本科</option>
                                            <option>大专</option>
                                            <option>其他</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">个人简介</label>
                                    <textarea class="mt-1 block w-full border border-gray-300 rounded-md" rows="3"></textarea>
                                </div>
                                <div class="flex justify-end space-x-3">
                                    <button type="button" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md" id="cancelAddStaff">取消</button>
                                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md">保存</button>
                                </div>
                            </form>
                        </div>
                    `;
                    document.body.appendChild(modal);
                    
                    // 关闭模态框
                    const closeModal = () => {
                        document.body.removeChild(modal);
                    };
                    
                    document.getElementById('closeAddStaffModal').addEventListener('click', closeModal);
                    document.getElementById('cancelAddStaff').addEventListener('click', closeModal);
                    
                    // 表单提交
                    document.getElementById('addStaffForm').addEventListener('submit', function(e) {
                        e.preventDefault();
                        alert('人员添加成功！');
                        closeModal();
                    });
                });
            }

            // 创建人员详情模态框
            function createStaffDetailModal(staffId) {
                const staff = staffData.find(s => s.id === staffId);
                if (!staff) return;
                
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="fixed inset-0 bg-black bg-opacity-50"></div>
                    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-3xl z-10">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-800">人员详情</h3>
                            <button class="text-gray-500 hover:text-gray-700 focus:outline-none" id="closeStaffDetailModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="flex flex-col md:flex-row">
                            <div class="md:w-1/3 flex flex-col items-center mb-6 md:mb-0">
                                <img class="w-32 h-32 rounded-full mb-4" src="${staff.avatar}" alt="${staff.name}">
                                <h4 class="text-lg font-medium text-gray-800">${staff.name}</h4>
                                <p class="text-gray-600">${staff.position}</p>
                                <p class="text-sm text-gray-500">${staff.department}</p>
                                <div class="flex space-x-3 mt-4">
                                    <button class="bg-blue-100 text-blue-600 p-2 rounded-full">
                                        <i class="fas fa-phone"></i>
                                    </button>
                                    <button class="bg-blue-100 text-blue-600 p-2 rounded-full">
                                        <i class="fas fa-envelope"></i>
                                    </button>
                                    <button class="bg-blue-100 text-blue-600 p-2 rounded-full">
                                        <i class="fas fa-comment"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="md:w-2/3 md:pl-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <p class="text-sm text-gray-500">性别</p>
                                        <p class="font-medium">${staff.details.gender}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">年龄</p>
                                        <p class="font-medium">${staff.details.age}岁</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">学历</p>
                                        <p class="font-medium">${staff.details.education}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">专业</p>
                                        <p class="font-medium">${staff.details.major}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">电话</p>
                                        <p class="font-medium">${staff.phone}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">邮箱</p>
                                        <p class="font-medium">${staff.email}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">入职日期</p>
                                        <p class="font-medium">${staff.details.entryDate}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">地址</p>
                                        <p class="font-medium">${staff.details.address}</p>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500 mb-2">个人简介</p>
                                    <p class="text-gray-700">${staff.details.bio}</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 border-t pt-6">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="font-medium text-gray-800">最近工作</h4>
                                <button class="text-sm text-blue-600" id="viewAllWorkBtn">查看全部</button>
                            </div>
                            <div class="space-y-3" id="recentWorkContainer">
                                <div class="p-3 border rounded-lg">
                                    <div class="flex justify-between">
                                        <p class="font-medium">年度工作计划制定</p>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">已完成</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">制定部门年度工作计划与目标</p>
                                    <p class="text-xs text-gray-500 mt-2">截止日期: 2025-01-15</p>
                                </div>
                                <div class="p-3 border rounded-lg">
                                    <div class="flex justify-between">
                                        <p class="font-medium">季度预算审核</p>
                                        <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs">进行中</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">审核并批准Q2季度预算方案</p>
                                    <p class="text-xs text-gray-500 mt-2">截止日期: 2025-04-10</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 关闭模态框
                document.getElementById('closeStaffDetailModal').addEventListener('click', function() {
                    document.body.removeChild(modal);
                });

                // 查看全部工作按钮点击事件
                document.getElementById('viewAllWorkBtn').addEventListener('click', function() {
                    showAllWork(staff);
                });
            }

            // 显示全部工作记录
            function showAllWork(staff) {
                // 创建工作记录数据
                const allWorkData = [
                    {
                        title: "年度工作计划制定",
                        description: "制定部门年度工作计划与目标",
                        deadline: "2025-01-15",
                        status: "已完成",
                        statusClass: "bg-green-100 text-green-800"
                    },
                    {
                        title: "季度预算审核",
                        description: "审核并批准Q2季度预算方案",
                        deadline: "2025-04-10",
                        status: "进行中",
                        statusClass: "bg-blue-100 text-blue-800"
                    },
                    {
                        title: "部门人员培训",
                        description: "组织开展部门专业技能培训",
                        deadline: "2025-05-20",
                        status: "未开始",
                        statusClass: "bg-gray-100 text-gray-800"
                    },
                    {
                        title: "政策研究报告",
                        description: "编写关于城市公共服务改革的政策研究报告",
                        deadline: "2025-03-05",
                        status: "已完成",
                        statusClass: "bg-green-100 text-green-800"
                    },
                    {
                        title: "跨部门协调会议",
                        description: "组织召开跨部门协调会议，解决项目推进问题",
                        deadline: "2025-02-28",
                        status: "已完成",
                        statusClass: "bg-green-100 text-green-800"
                    },
                    {
                        title: "年中工作总结",
                        description: "整理部门上半年工作总结和下半年工作计划",
                        deadline: "2025-06-30",
                        status: "未开始",
                        statusClass: "bg-gray-100 text-gray-800"
                    },
                    {
                        title: "专项资金申请",
                        description: "准备专项资金申请材料和预算规划",
                        deadline: "2025-05-15",
                        status: "进行中",
                        statusClass: "bg-blue-100 text-blue-800"
                    },
                    {
                        title: "数据统计分析",
                        description: "整理分析部门年度数据，形成数据分析报告",
                        deadline: "2025-01-31",
                        status: "已完成",
                        statusClass: "bg-green-100 text-green-800"
                    }
                ];

                // 创建全部工作记录模态框
                const allWorkModal = document.createElement('div');
                allWorkModal.className = 'fixed inset-0 flex items-center justify-center z-50';
                allWorkModal.innerHTML = `
                    <div class="fixed inset-0 bg-black bg-opacity-50"></div>
                    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl z-10 max-h-screen overflow-y-auto">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-800">${staff.name} 的全部工作</h3>
                            <button class="text-gray-500 hover:text-gray-700 focus:outline-none" id="closeAllWorkModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <div class="flex space-x-2">
                                    <select class="form-select text-sm border-gray-300 rounded-md">
                                        <option>所有状态</option>
                                        <option>已完成</option>
                                        <option>进行中</option>
                                        <option>未开始</option>
                                    </select>
                                    <select class="form-select text-sm border-gray-300 rounded-md">
                                        <option>按截止日期</option>
                                        <option>按创建日期</option>
                                        <option>按状态</option>
                                    </select>
                                </div>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center">
                                        <i class="fas fa-search text-gray-500"></i>
                                    </span>
                                    <input class="form-input w-64 rounded-md pl-10 py-2 border border-gray-300" type="text" placeholder="搜索工作项...">
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            ${allWorkData.map(work => `
                                <div class="p-4 border rounded-lg hover:shadow-md transition-shadow">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <div class="flex items-center">
                                                <h4 class="font-medium text-gray-800">${work.title}</h4>
                                                <span class="ml-3 px-2 py-1 ${work.statusClass} rounded text-xs">${work.status}</span>
                                            </div>
                                            <p class="text-sm text-gray-600 mt-1">${work.description}</p>
                                        </div>
                                        <div class="flex flex-col items-end">
                                            <p class="text-xs text-gray-500">截止日期</p>
                                            <p class="font-medium">${work.deadline}</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between items-center">
                                        <div class="text-xs text-gray-500">
                                            <span class="mr-4">负责人: ${staff.name}</span>
                                            <span>部门: ${staff.department}</span>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button class="text-blue-600 hover:text-blue-800 text-sm">查看详情</button>
                                            <button class="text-blue-600 hover:text-blue-800 text-sm">更新状态</button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                document.body.appendChild(allWorkModal);
                
                // 关闭全部工作记录模态框
                document.getElementById('closeAllWorkModal').addEventListener('click', function() {
                    document.body.removeChild(allWorkModal);
                });
            }

            // 设置人员详情按钮点击事件
            function setupStaffDetailButtons() {
                const detailBtns = document.querySelectorAll('.staff-detail');
                detailBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const staffId = parseInt(this.getAttribute('data-id'));
                        createStaffDetailModal(staffId);
                    });
                });
            }

            // 初始设置详情按钮
            setupStaffDetailButtons();
        });
    </script>
</body>
</html> 